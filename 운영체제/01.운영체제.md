# 1. 운영체제란
- 하드웨어 위에 설치되어 하드웨어 계층과 다른 소프트웨어 계층을 연결하는 소프트웨어 계층이다.  
- CPU, 메모리 같은 한정적인 컴퓨터 자원을 관리한다.  
- 사용자가 컴퓨터를 사용할 수 있는 환경을 제공한다.    
- 사용자와 컴퓨터 간 인터페이스를 제공해 사용자가 컴퓨터를 편리하게 사용할 수 있는 환경을 제공한다.  
- Window, macOS, Linux, Unix 등이 있다.  

# 2. 운영체제의 목적
하드웨어와 소프트웨어를 이어주는 계층으로써 한정된 자원 안에서 정확하고 빠르게 주어진 문제를 해결하는 것이 목적이다.  
- `처리능력(throughput) 향상`: OS는 자원 관리를 통해 일정 시간 내에 시스템이 처리하는 일의 양을 향상시킨다.
- `반환시간(turnaroud time) 단축`: OS는 사용자가 시스템에 요청한 작업을 완료할 때까지 소요되는 시간을 단축시킨다.
- `사용 가능도(availability) 향상`: 사용 가능도는 시스템 자원을 얼마나 빨리 제공할 수 있는가를 의미한다. OS는 사용자가 컴퓨터를 사용해야 할 때 자원을 즉시 사용할 수 있게 한다.
- `신뢰도(reliability) 향상`: 신뢰도는 시스템이 주어진 문제를 정확하게 푸는지를 의미한다. OS는 입력 값에 대한 정확한 결과 값을 줄 수 있도록 신뢰도를 향상해야 한다.

# 3. CPU와 메모리 구조
### 1. `CPU`
'컴퓨터의 뇌' 역할을 하며, 컴퓨터에서 프로그램을 실행하는 데 필요한 연산을 처리하고 수행한다. `프로세서`라고도 한다.
1. **산술논리 연산장치**: 실제로 데이터 연산
2. **제어 장치**: 모든 장치들의 동작을 지시하고 제어
3. **레지스터**: CPU내에서 계산을 위해 임시로 보관 (변수)

### 2. `메모리`
데이터를 저장하기 위한 기억장치이다.  
- 주 기억장치: 메인 메모리를 의미하며 일반적으로 RAM을 가리킨다.
- 보조 기억장치: SSD(Solid State Drive), HDD(Hard Disk Drive)

### 3. 메모리 계층 구조
메모리는 CPU에서 빨리 접근할 수 있도록 계층 구조로 나뉜다.  
<img width="400" alt="메모리계층구조" src="https://github.com/fbgjung/study-notes/assets/104186871/1cbe963a-0072-46aa-9415-504f4bc2c2cc">

- 레지스터(register): CPU가 사용자 요청을 처리하는 데 필요한 데이터를 임시로 저장하는 기억장치다.
- 캐시 메모리(cache memory): CPU와 RAM 사이의 속도 차이를 해결하기 위한 기억장치다.
- RAM(Random Access Memory): 컴퓨터에서 프로그램을 실행할 때 필요한 정보를 저장한다. 휘발성 기억장치다.
- 하드 디스크: 사용자가 필요한 데이터와 프로그램을 저장하고, 비휘발성 기억장치다.


> 프로그램을 실행하면 OS가 디스크에 있는 프로그램을 메모리로 로드한다.  
메모리에 로드한 프로그램을 프로세스라고 하며 CPU가 처리한다.  
CPU는 하나의 프로세스만 처리할 수 있어서 멀티 프로세스 환경에서는 **OS가 스케줄링을 통해 CPU에 프로세스를 할당한다.**

# 4. 커널과 시스템 콜

### 1. `커널`
- OS의 핵심 요소이다.  
- 컴퓨터 하드웨어와 프로세스의 보안, 자원 관리, 하드웨어 추상화 같은 중요한 역할을 수행한다.  
- 자원 관리를 위한 CPU 스케줄링, 메모리 관리, 입출력 관리, 파일 시스템 관리 등을 담당한다.

### 2. `시스템 콜`
사용자 모드에서 `커널 모드에 접근`해 필요한 기능을 수행할 수 있게 하는 시스템이다.  
커널은 사용자로부터 자신을 보호하기 위해 `시스템 콜`이라는 인터페이스를 가지고 있는것이다.

- `커널 모드`: 하드웨어에 직접 접근해 메모리, CPU와 같은 자원을 사용할 수 있다.
- `사용자 모드`: 커널 모드의 자원에 접근할 수 없게 제한을 둔다.

사용자 모드에서 실행된 프로세스가 자원에 접근하려면 시스템 콜을 호출해 커널에 요청해야 한다.  
커널은 시스템 콜로 받은 요청을 처리한 후 다시 시스템 콜로 결과 값을 반환한다.  

시스템콜을 사용해 프로세스 제어, 파일 조작, 장치 관리, 데이터의 유지 보수, 통신, 보호를 할 수 있다.  
프로세스를 생성하는 `fork()`, 부모 프로세스가 자식 프로세스의 수행을 기다리는 `wait()` 등이 있다.

> 시스템 콜이 없다면?  
> - 시스템 콜 없이 어플리케이션이 하드디스크에 직접 접근하면 중요한 데이터를 덮어 쓸 수도 있고  
> - 해당 사용자나 어플리케이션이 저장한 데이터를 다른 어플리케이션이 덮어 쓸 수도 있다.

# 5. 시스템 콜에서 커널에 매개변수를 전달하는 방법 3가지
1. 매개변수를 CPU의 레지스터에 직접 전달하는 방식  

    - 매개변수의 개수가 레지스터의 개수보다 많은 경우에 문제가 될 수 있어서 권장하지 않는다. 
2. 매개변수의 갯수가 CPU 내의 총 레지스터 개수보다 많은 경우, 매개변수를 메모리에 저장한 후 메모리의 주소 값을 레지스터에 저장하는 방식
3. 매개변수를 프로그램의 스택에 push하고 OS에서 pop해 매개변수를 전달하는 방식

    - 매개변수는 프로그램에 의해 스택에 넣어지고, 운영체제에 의해 꺼내진다.

전달되는 매개변수들의 개수나 길이를 제한하지 않기 때문에 2번 방법을 많이 사용한다.

## 참고
[[메모리]운영체제-메모리구조](https://velog.io/@shindoyeon/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B5%AC%EC%A1%B0)  
